package com.example.item.tools.webService.xmlParse2;

import lombok.Data;
import lombok.EqualsAndHashCode;
import org.dom4j.Document;
import org.dom4j.DocumentException;
import org.dom4j.DocumentHelper;
import org.dom4j.Element;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

public class RatableResourceXParseTest {

    public static void main(String[] args) throws DocumentException {
        String soap = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><soapenv:Body><ns1:getRatableResourceResponse soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:ns1=\"http://webservice.bsn.ztesoft.com\"><getRatableResourceReturn href=\"#id0\"/></ns1:getRatableResourceResponse><multiRef id=\"id0\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns2:ServiceInformation\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:ns2=\"http://model.balancemgr.bsn.ztesoft.com\"><paraFieldResult xsi:type=\"xsd:string\">&#x6210;&#x529F;</paraFieldResult><productOffInfos soapenc:arrayType=\"ns2:ProductOffInfo[2]\" xsi:type=\"soapenc:Array\"><productOffInfos href=\"#id1\"/><productOffInfos href=\"#id2\"/></productOffInfos><serviceResultCode xsi:type=\"xsd:int\">0</serviceResultCode><totalAmounts soapenc:arrayType=\"ns2:TotalAmount[3]\" xsi:type=\"soapenc:Array\"><totalAmounts href=\"#id3\"/><totalAmounts href=\"#id4\"/><totalAmounts href=\"#id5\"/></totalAmounts></multiRef><multiRef id=\"id1\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns3:ProductOffInfo\" xmlns:ns3=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><offerType xsi:type=\"xsd:string\">22</offerType><prodOfferInstanceId xsi:type=\"xsd:string\">122525272527</prodOfferInstanceId><productOffName xsi:type=\"xsd:string\">&#x5168;&#x5BB6;&#x798F;&#x7545;&#x4EAB;&#x5957;&#x9910;5&#x5143;&#x526F;&#x5361;&#x529F;&#x80FD;&#x8D39;&#x3010;2018&#x3011;</productOffName><productOfferId xsi:type=\"xsd:string\">10087887</productOfferId><respondRatabeQuery soapenc:arrayType=\"ns3:RespondRatableQuery[0]\" xsi:type=\"soapenc:Array\"/></multiRef><multiRef id=\"id5\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns4:TotalAmount\" xmlns:ns4=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><totalBalanceAmount xsi:type=\"xsd:long\">0</totalBalanceAmount><totalLoseAmount xsi:type=\"xsd:long\">0</totalLoseAmount><totalOverTop xsi:type=\"xsd:int\">0</totalOverTop><totalRatableAmount xsi:type=\"xsd:long\">2097152</totalRatableAmount><totalType xsi:type=\"xsd:int\">300</totalType><totalUnitTypeId xsi:type=\"xsd:int\">3</totalUnitTypeId><totalUsageAmount xsi:type=\"xsd:long\">2097152</totalUsageAmount></multiRef><multiRef id=\"id3\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns5:TotalAmount\" xmlns:ns5=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><totalBalanceAmount xsi:type=\"xsd:long\">1643</totalBalanceAmount><totalLoseAmount xsi:type=\"xsd:long\">0</totalLoseAmount><totalOverTop xsi:type=\"xsd:int\">0</totalOverTop><totalRatableAmount xsi:type=\"xsd:long\">2000</totalRatableAmount><totalType xsi:type=\"xsd:int\">100</totalType><totalUnitTypeId xsi:type=\"xsd:int\">1</totalUnitTypeId><totalUsageAmount xsi:type=\"xsd:long\">357</totalUsageAmount></multiRef><multiRef id=\"id4\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns6:TotalAmount\" xmlns:ns6=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><totalBalanceAmount xsi:type=\"xsd:long\">10483596481</totalBalanceAmount><totalLoseAmount xsi:type=\"xsd:long\">0</totalLoseAmount><totalOverTop xsi:type=\"xsd:int\">0</totalOverTop><totalRatableAmount xsi:type=\"xsd:long\">10527703040</totalRatableAmount><totalType xsi:type=\"xsd:int\">310</totalType><totalUnitTypeId xsi:type=\"xsd:int\">3</totalUnitTypeId><totalUsageAmount xsi:type=\"xsd:long\">44106559</totalUsageAmount></multiRef><multiRef id=\"id2\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns7:ProductOffInfo\" xmlns:ns7=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><offerType xsi:type=\"xsd:string\">21</offerType><prodOfferInstanceId xsi:type=\"xsd:string\">122525272526</prodOfferInstanceId><productOffName xsi:type=\"xsd:string\">&#x5168;&#x5BB6;&#x798F;&#x7545;&#x4EAB;40GB(169&#x5143;)&#x5957;&#x9910;&#x3010;2018&#x3011;</productOffName><productOfferId xsi:type=\"xsd:string\">10087884</productOfferId><respondRatabeQuery soapenc:arrayType=\"ns7:RespondRatableQuery[3]\" xsi:type=\"soapenc:Array\"><respondRatabeQuery href=\"#id6\"/><respondRatabeQuery href=\"#id7\"/><respondRatabeQuery href=\"#id8\"/></respondRatabeQuery></multiRef><multiRef id=\"id7\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns8:RespondRatableQuery\" xmlns:ns8=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accuTypeId xsi:type=\"xsd:int\">242435</accuTypeId><balanceAmount xsi:type=\"xsd:long\">10483596481</balanceAmount><beginTime xsi:type=\"xsd:string\">20210301000000</beginTime><carryOverAmount xsi:type=\"xsd:long\">0</carryOverAmount><endTime xsi:type=\"xsd:string\">20210331235959</endTime><loseAmount xsi:type=\"xsd:long\">0</loseAmount><offerType xsi:type=\"xsd:string\">21</offerType><ownerId xsi:type=\"xsd:long\">122525272526</ownerId><ownerType xsi:type=\"xsd:string\">2</ownerType><pricingPlanId xsi:type=\"xsd:long\">900004282</pricingPlanId><ratableAmount xsi:type=\"xsd:long\">10527703040</ratableAmount><ratableQueryDetial soapenc:arrayType=\"ns8:RatableQueryDetial[5]\" xsi:type=\"soapenc:Array\"><ratableQueryDetial href=\"#id9\"/><ratableQueryDetial href=\"#id10\"/><ratableQueryDetial href=\"#id11\"/><ratableQueryDetial href=\"#id12\"/><ratableQueryDetial href=\"#id13\"/></ratableQueryDetial><ratableResourceId xsi:type=\"xsd:string\">331101</ratableResourceId><ratableResourceName xsi:type=\"xsd:string\">&#x56FD;&#x5185;&#x6D41;&#x91CF;</ratableResourceName><specilFlag xsi:type=\"xsd:int\">0</specilFlag><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><usageAmount xsi:type=\"xsd:long\">44106559</usageAmount></multiRef><multiRef id=\"id8\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns9:RespondRatableQuery\" xmlns:ns9=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accuTypeId xsi:type=\"xsd:int\">4963</accuTypeId><balanceAmount xsi:type=\"xsd:long\">0</balanceAmount><beginTime xsi:type=\"xsd:string\">20210301000000</beginTime><carryOverAmount xsi:type=\"xsd:long\">0</carryOverAmount><endTime xsi:type=\"xsd:string\">20210331235959</endTime><loseAmount xsi:type=\"xsd:long\">0</loseAmount><offerType xsi:type=\"xsd:string\">21</offerType><ownerId xsi:type=\"xsd:long\">122525272526</ownerId><ownerType xsi:type=\"xsd:string\">2</ownerType><pricingPlanId xsi:type=\"xsd:long\">900001657</pricingPlanId><ratableAmount xsi:type=\"xsd:long\">2097152</ratableAmount><ratableQueryDetial soapenc:arrayType=\"ns9:RatableQueryDetial[5]\" xsi:type=\"soapenc:Array\"><ratableQueryDetial href=\"#id14\"/><ratableQueryDetial href=\"#id15\"/><ratableQueryDetial href=\"#id16\"/><ratableQueryDetial href=\"#id17\"/><ratableQueryDetial href=\"#id18\"/></ratableQueryDetial><ratableResourceId xsi:type=\"xsd:string\">331100</ratableResourceId><ratableResourceName xsi:type=\"xsd:string\">&#x56FD;&#x5185;&#x6D41;&#x91CF;</ratableResourceName><specilFlag xsi:type=\"xsd:int\">1001</specilFlag><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><usageAmount xsi:type=\"xsd:long\">2097152</usageAmount></multiRef><multiRef id=\"id6\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns10:RespondRatableQuery\" xmlns:ns10=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accuTypeId xsi:type=\"xsd:int\">3978</accuTypeId><balanceAmount xsi:type=\"xsd:long\">1643</balanceAmount><beginTime xsi:type=\"xsd:string\">20210301000000</beginTime><carryOverAmount xsi:type=\"xsd:long\">0</carryOverAmount><endTime xsi:type=\"xsd:string\">20210331235959</endTime><loseAmount xsi:type=\"xsd:long\">0</loseAmount><offerType xsi:type=\"xsd:string\">21</offerType><ownerId xsi:type=\"xsd:long\">122525272526</ownerId><ownerType xsi:type=\"xsd:string\">2</ownerType><pricingPlanId xsi:type=\"xsd:long\">420662423</pricingPlanId><ratableAmount xsi:type=\"xsd:long\">2000</ratableAmount><ratableQueryDetial soapenc:arrayType=\"ns10:RatableQueryDetial[5]\" xsi:type=\"soapenc:Array\"><ratableQueryDetial href=\"#id19\"/><ratableQueryDetial href=\"#id20\"/><ratableQueryDetial href=\"#id21\"/><ratableQueryDetial href=\"#id22\"/><ratableQueryDetial href=\"#id23\"/></ratableQueryDetial><ratableResourceId xsi:type=\"xsd:string\">131100</ratableResourceId><ratableResourceName xsi:type=\"xsd:string\">&#x56FD;&#x5185;&#x8BED;&#x97F3;&#x65F6;&#x957F;</ratableResourceName><specilFlag xsi:type=\"xsd:int\">0</specilFlag><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><usageAmount xsi:type=\"xsd:long\">357</usageAmount></multiRef><multiRef id=\"id17\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns11:RatableQueryDetial\" xmlns:ns11=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17783901121</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">886</useValue></multiRef><multiRef id=\"id10\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns12:RatableQueryDetial\" xmlns:ns12=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">15310072613</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">5784852</useValue></multiRef><multiRef id=\"id11\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns13:RatableQueryDetial\" xmlns:ns13=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">13350336168</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">501785</useValue></multiRef><multiRef id=\"id20\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns14:RatableQueryDetial\" xmlns:ns14=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">15310072613</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><useValue xsi:type=\"xsd:long\">132</useValue></multiRef><multiRef id=\"id9\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns15:RatableQueryDetial\" xmlns:ns15=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17782263622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">35995858</useValue></multiRef><multiRef id=\"id14\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns16:RatableQueryDetial\" xmlns:ns16=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17782263622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">2037337</useValue></multiRef><multiRef id=\"id13\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns17:RatableQueryDetial\" xmlns:ns17=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">18996339622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">1803981</useValue></multiRef><multiRef id=\"id18\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns18:RatableQueryDetial\" xmlns:ns18=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">18996339622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">36816</useValue></multiRef><multiRef id=\"id23\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns19:RatableQueryDetial\" xmlns:ns19=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">18996339622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><useValue xsi:type=\"xsd:long\">146</useValue></multiRef><multiRef id=\"id21\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns20:RatableQueryDetial\" xmlns:ns20=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">13350336168</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><useValue xsi:type=\"xsd:long\">11</useValue></multiRef><multiRef id=\"id22\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns21:RatableQueryDetial\" xmlns:ns21=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17783901121</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><useValue xsi:type=\"xsd:long\">36</useValue></multiRef><multiRef id=\"id15\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns22:RatableQueryDetial\" xmlns:ns22=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">15310072613</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">22040</useValue></multiRef><multiRef id=\"id16\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns23:RatableQueryDetial\" xmlns:ns23=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">13350336168</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">73</useValue></multiRef><multiRef id=\"id12\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns24:RatableQueryDetial\" xmlns:ns24=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17783901121</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">3</unitTypeId><useValue xsi:type=\"xsd:long\">20083</useValue></multiRef><multiRef id=\"id19\" soapenc:root=\"0\" soapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xsi:type=\"ns25:RatableQueryDetial\" xmlns:ns25=\"http://model.balancemgr.bsn.ztesoft.com\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"><accNbr xsi:type=\"xsd:string\">17782263622</accNbr><overTop xsi:type=\"xsd:long\">0</overTop><unitTypeId xsi:type=\"xsd:string\">1</unitTypeId><useValue xsi:type=\"xsd:long\">32</useValue></multiRef></soapenv:Body></soapenv:Envelope>\n";
        //初始化报文，调用parse方法，获得结果map，然后按照需求取得字段，或者转化为其他格式
        new RatableResourceXParseTest().parse(soap);
    }

    public void parse(String soap) throws DocumentException {
        Document doc = DocumentHelper.parseText(soap);//报文转成doc对象
        Element root = doc.getRootElement();//获取根元素，准备递归解析这个XML树
        getCode(root.element("Body"));
    }

    public void getCode(Element root) {
        BigDecimal overBill = BigDecimal.ZERO;
        BigDecimal overFlow = BigDecimal.ZERO;
        boolean ifLimit = false;
        if (root.elements() != null) {
            List<TestMode> resultList = new ArrayList<>();
            List<Element> list = root.elements();//如果当前跟节点有子节点，找到子节点
            for (Element e : list) {//遍历每个节点
                if (e.elements().size() > 0) {
                    if (e.getName().equals("multiRef")) {
                        if (null != e.element("accNbr") && "17782263622".equals(e.element("accNbr").getTextTrim())) {
                            // 溢出金额（分）
                            if (e.element("unitTypeId").getTextTrim().equals("1")) {
                                overBill = overBill.add(new BigDecimal(e.element("overTop").getTextTrim()));
                            }
                            // 溢出流量（KB）
                            else if (e.element("unitTypeId").getTextTrim().equals("3")) {
                                overFlow = overFlow.add(new BigDecimal(e.element("overTop").getTextTrim()));
                            }
                        }
                        if (null != e.element("productOffName") && null != e.element("offerType")) {
                            TestMode testMode = new TestMode();
                            testMode.setOfferType(e.element("offerType").getTextTrim());
                            testMode.setProdOfferInstanceId(e.element("prodOfferInstanceId") == null ? "" : e.element("prodOfferInstanceId").getTextTrim());
                            testMode.setProductOffName(e.element("productOffName") == null ? "" : e.element("productOffName").getTextTrim());
                            testMode.setProductOfferId(e.element("productOfferId") == null ? "" : e.element("productOfferId").getTextTrim());
                            resultList.add(testMode);
                        }
                        if (null != e.element("ratableResourceId")) {
                            String ratableResourceId = e.element("ratableResourceId").getTextTrim();
                            if (ratableResourceId.equals("331101")) {
                                ifLimit = true;
                            }
                        }
                    }
                }
            }
            for (TestMode s : resultList) {
                System.out.println(s);
            }
            System.out.println(overBill);
            System.out.println(overFlow);
            System.out.println(ifLimit);
        }
    }

    @Data
    @EqualsAndHashCode(callSuper = false)
    public static class TestMode {
        private String offerType;
        private String prodOfferInstanceId;
        private String productOffName;
        private String productOfferId;
    }

}
